<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <title>Connect to Cream First AI</title>
 <style>
   body {
     font-family: Arial, sans-serif;
     text-align: center;
     padding: 60px;
     color: #222;
   }
   button {
     background-color: #1877F2;
     color: white;
     font-size: 18px;
     padding: 12px 24px;
     border: none;
     border-radius: 8px;
     cursor: pointer;
   }
 </style>
</head>
<body>
 <h1>Connect your Facebook & Instagram</h1>
 <p>Click below to authorise Cream First AI to manage your business messages.</p>

 <button id="fbBtn">Connect with Facebook</button>

 <script>
   (function () {
     const appId = '111435447122158'; // your numeric App ID
     const redirect = 'https://cream-bot-messenger.onrender.com/auth'; // MUST match Meta > Facebook Login > Valid OAuth Redirect URIs
     const scopes = [
       'pages_show_list',
       'pages_manage_metadata',
       'pages_messaging',
       'instagram_basic',
       'instagram_manage_messages',
       'instagram_business_basic'
     ];

     document.getElementById('fbBtn').addEventListener('click', function () {
       const url = 'https://www.facebook.com/v18.0/dialog/oauth'
         + `?client_id=${encodeURIComponent(appId)}`
         + `&redirect_uri=${encodeURIComponent(redirect)}`
         + `&response_type=code`
         + `&scope=${encodeURIComponent(scopes.join(','))}`
         + `&auth_type=rerequest`; // always show the permission dialog

       window.location.href = url; // <-- actually navigate to Facebook
     });
   })();
 </script>
</body>
</html>
